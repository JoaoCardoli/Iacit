<!-- Content Header (Page header) -->
<div class="content-header" style="padding: 10px;">
  <div class="container-fluid">

    <div class="row mb-2">

      <div class="col-sm-6">
        <h1 class="m-0"></h1>
      </div><!-- /.col -->

      <div class="col-sm-4">


        <h1 th:text="${dataLimiteInicial}"></h1>
        <h1 th:text="${dataLimiteFinal}"></h1>

      </div><!-- /.col -->

    </div><!-- /.row -->

  </div><!-- /.container-fluid -->
</div>
<!-- /.content-header -->

<!-- Main content -->
<section class="col-lg-7 ">  
  <div class="container">
    <div class="row">
      <div class="col-lg-12 col-sm-12">
        <div class=" card mt-12 ">

          <canvas id="myChart3"></canvas>
          <hr>
          <button onclick="resetZoomChart()">Reset</button>
          <!-- SCRIPT TEMPERATURA -->
          <script th:inline="javascript">

            //RECEBE O OBJETO JAVA AQUI
            var rangeUmidade = [[${ rangeUmidade }]];

            //DEFINO O CAMPO DESSE OBJETO
            var rangeUmidade_x = rangeUmidade.map(x => x["datahoraCaptacao"])
            var rangeUmidadeMin = rangeUmidade.map(x => x["umidadeRelativaMin"])
            var rangeUmidadeMax = rangeUmidade.map(x => x["umidadeRelativaMax"])
            var rangeUmidadeAr = rangeUmidade.map(x => x["umidadeRelativaAr"])

            const ctx3 = document.getElementById('myChart3');
            const myChart3 = new Chart(ctx3, {
              type: 'line',
              data: {
                //WHILE X
                labels: rangeUmidade_x,

                datasets: [
                  //Umidade Minima
                  {
                    label: 'Umid Min',
                    data: rangeUmidadeMin,
                    backgroundColor: [
                      'rgba(0, 0, 0, 0)'
                    ],
                    borderColor: [
                      'rgba(36, 180, 224, 1)',
                    ],
                    borderWidth: 1
                  },

                  //Umidade Maxima
                  {
                    label: 'Umid Max',
                    data: rangeUmidadeMax,
                    backgroundColor: [
                      'rgba(0, 0, 0, 0)'
                    ],
                    borderColor: [
                      'rgba(255, 0, 0, 1)',
                    ],
                    borderWidth: 1,
                    fill: 1
                  },

                  //Umidade Ar
                  {
                    label: 'Umid Ar',
                    data: rangeUmidadeAr,
                    backgroundColor: [
                      'rgba(0, 0, 0, 0)'
                    ],
                    borderColor: [
                      'rgba(127, 36, 224, 1)',
                    ],
                    borderWidth: 1
                  },
                ],
              },
              options: {
                plugins: {
                  zoom: {
                    zoom: {
                      //zoom scrool
                      wheel: {
                        enabled: true,
                        speed:0.1,
                        threshold:50
                      },
                      //zoom selecionar
                     drag:{
                      enabled:true,
                      backgroundColor: 'rgb(233, 233, 233)',
                      threshold:50
                     },
                      pinch: {
                        enabled: true,
                      },
                    }
                  }
                }
              }
            });Chart.register(zoomPlugin);
           function resetZoomChart(){
            myChart3.resetZoom();
           }

          </script>

        </div>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="row">
      <div class="col-lg-12 col-sm-8">

        <div class=" card mt-6 ">


          <canvas id="myChart5" width="400" height="200"></canvas>
          <hr>
          <button onclick="resetZoomChart()">Reset</button>

          <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>

          <script>
            const ctx5 = document.getElementById('myChart5');
            const myChart5 = new Chart(ctx5, {
              type: 'bar',
              data: {
                //WHILE X
                labels: rangeUmidade_x,

                //Temperatura Maxima
                datasets: [
                  //Umidade Minima
                  {
                    label: 'Umid Min',
                    data: rangeUmidadeMin,
                    backgroundColor: color => {
                      console.log(color)
                      let colors = color.index > 3 ? 'rgba(36, 180, 224, 1)' : 'rgba(36, 180, 224, 1)';
                      return colors;
                    },
                    borderColor: color => {
                      console.log(color)
                      let colors = color.index > 3 ? 'rgba(36, 180, 224, 1)' : 'rgba(36, 180, 224, 1)';
                      return colors;
                    },
                    borderWidth: 1,
                  },

                  //Umidade Maxima
                  {
                    label: 'Umid Max',
                    data: rangeUmidadeMax,
                    backgroundColor: color => {
                      console.log(color)
                      let colors = color.index > 3 ? 'rgba(36, 180, 224, 1)' : 'rgba(255, 0, 0, 1)';
                      return colors;
                    },
                    borderColor: color => {
                      console.log(color)
                      let colors = color.index > 3 ? 'rgba(255, 0, 0, 1)' : 'rgba(255, 0, 0, 1)';
                      return colors;
                    },
                    borderWidth: 1,
                  },

                  //Umidade Ar
                  {
                    label: 'Umid Ar',
                    data: rangeUmidadeAr,
                    backgroundColor: color => {
                      console.log(color)
                      let colors = color.index > 3 ? 'rgba(127, 36, 224, 1)' : 'rgba(127, 36, 224, 1)';
                      return colors;
                    },
                    borderColor: color => {
                      console.log(color)
                      let colors = color.index > 3 ? 'rgba(127, 36, 224, 1)' : 'rgba(127, 36, 224, 1)';
                      return colors;
                    },
                    borderWidth: 1,
                  },
                ],
              },
              options: {
                plugins: {
                  zoom: {
                    zoom: {
                      //zoom scrool
                      wheel: {
                        enabled: true,
                        speed:0.1,
                        threshold:50
                      },
                      //zoom selecionar
                     drag:{
                      enabled:true,
                      backgroundColor: 'rgb(233, 233, 233)',
                      threshold:50
                     },
                      pinch: {
                        enabled: true,
                      },
                    }
                  }
                }
              }
            });Chart.register(zoomPlugin);
           function resetZoomChart(){
            myChart5.resetZoom();
           }

          </script>
        </div>
      </div>
    </div>

</section>
<!-- /.Left col -->

<!-- right col (We are only adding the ID to make the widgets sortable)-->

<!-- <section class="col-lg-4 connectedSortable">-->

<!-- </section>-->
<!-- right col -->

</div>
<!-- /.row (main row) -->

</div><!-- /.container-fluid -->

</section>